---
import type { CollectionEntry } from "astro:content";

import Tag from "@components/Tag.astro";
import Date from "@components/Date.astro";
import getReadingTime from "@scripts/reading-time";

interface Props {
  post: CollectionEntry<"posts">;
}

const { post } = Astro.props;

const { title, description, date, tags } = post.data;
const readingTime = getReadingTime(post.body ?? "");
---

<article class="post-info">
  <h2>
    <a href={encodeURI(`/posts/${post.id}`)}>
      {title}
    </a>
  </h2>
  <table>
    <tbody>
      <tr>
        <th scope="row">💬</th>
        <td>{description}</td>
      </tr>
      <tr>
        <th scope="row">📅</th>
        <td><Date date={date} /></td>
      </tr>
      <tr>
        <th scope="row">⏱️</th>
        <td>{readingTime}</td>
      </tr>
      <tr>
        <th scope="row">🏷️</th>
        <td>
          {
            tags.map((tag) => (
              <>
                <Tag tag={tag} />
              </>
            ))
          }
        </td>
      </tr>
    </tbody>
  </table>
</article>
